import{ag as v,ad as b,ak as C,aj as O,_ as j}from"./router-f021161f.js";import{c as L,_ as $,a as B,b as V}from"./CheckmarkSharp-00137a61.js";import{d as A,e as l,a5 as s,a6 as t,a as D,g as n,w as e,F as m,af as f,ah as r,a4 as g}from"./plugin-vueexport-helper-542923d8.js";const I={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},M=t("path",{d:"M432 144l-28.67 275.74A32 32 0 0 1 371.55 448H140.46a32 32 0 0 1-31.78-28.26L80 144",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),N=t("rect",{x:"32",y:"64",width:"448",height:"80",rx:"16",ry:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),q=t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M312 240L200 352"},null,-1),z=t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M312 352L200 240"},null,-1),F=[M,N,q,z],P=A({name:"TrashBinOutline",render:function(u,a){return l(),s("svg",I,F)}});const S={class:"OrderAdContain"},E=t("h1",{style:{"margin-left":"20px"}},"Orders",-1),H=t("thead",null,[t("tr",null,[t("th",null,"訂單日期"),t("th",null,"會員帳號"),t("th",null,"訂單內容"),t("th",null,"訂單金額"),t("th",null,"付款狀態"),t("th",null,"出貨狀態"),t("th",null,"取消訂單")])],-1),T={style:{width:"35%"}},G={style:{"text-align":"left"}},J=["href"],K=t("p",null,"已付款",-1),Q=t("p",null,"備貨中",-1),X={__name:"OrdersView",setup(k){const u=D([]);return(async()=>{try{const{data:a}=await v.get("/orders/all");u.push(...a.result.map(i=>(i.totalPrice=i.products.reduce((d,c)=>d+c.p_id.price*c.quantity,0),i)))}catch{message.error("取得訂單失敗")}})(),(a,i)=>{const d=O,c=$,w=B,y=V,h=b,p=j,x=C;return l(),s("div",S,[E,n(x,null,{default:e(()=>[H,t("tbody",null,[(l(!0),s(m,null,f(u,o=>(l(),s("tr",{key:o._id},[t("td",null,r(new Date(o.date).toLocaleDateString()),1),t("td",null,r(o.u_id.account),1),t("td",T,[n(y,{"arrow-placement":"right"},{default:e(()=>[t("p",G,"訂單單號: "+r(o._id),1),n(w,{title:"Order List",style:{"text-align":"left","border-top":"none",padding:"0"}},{default:e(()=>[(l(!0),s(m,null,f(o.products,_=>(l(),s("div",{key:_._id},[n(c,{bordered:"false"},{default:e(()=>[t("tr",null,[n(d,{src:_.p_id.image[0],width:30,height:30,"object-fit":"cover"},null,8,["src"]),t("a",{href:"#/products/"+_.p_id._id},r(_.p_id.name+" x "+_.quantity+"件"),9,J)])]),_:2},1024)]))),128))]),_:2},1024)]),_:2},1024)]),t("td",null,r(o.totalPrice)+" 元",1),t("td",null,[n(p,{text:"",type:"primary"},{default:e(()=>[n(h,{size:"22"},{default:e(()=>[n(g(L))]),_:1}),K]),_:1})]),t("td",null,[n(p,{text:""},{default:e(()=>[Q]),_:1})]),t("td",null,[n(p,{text:""},{default:e(()=>[n(h,{size:"22"},{default:e(()=>[n(g(P))]),_:1})]),_:1})])]))),128))])]),_:1})])}}};export{X as default};
